(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[222],{7250:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/checkout",function(){return t(7680)}])},7680:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return N}});var a=t(5893),r=t(7294),n=t(3133),i=t(2091),o=t(1664),c=t.n(o),l=t(7697),d=t.n(l);t(1784);let m=(e,s)=>e&&""!==e.trim()?null:{field:s,message:"".concat(s," is required")},h=e=>e?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?null:{field:"email",message:"Please enter a valid email address"}:{field:"email",message:"Email is required"};var u=t(4796),p=t(9368),x=t(8403);let y=async(e,s,t,a)=>{try{let r=s.map(e=>({productId:e.product.id,name:e.product.name,price:e.product.price,quantity:e.quantity,size:e.size,image:e.product.image}));return await (0,x.TR)({userId:e,items:r,totalAmount:a,shipping:t,status:"pending"})}catch(e){throw console.error("Error processing checkout:",e),e}};var j=t(1163);function N(){let{user:e}=(0,p.a)(),{cart:s,getCartTotal:t,clearCart:o}=(0,u.j)(),l=(0,j.useRouter)(),[x,N]=(0,r.useState)("shipping"),[f,v]=(0,r.useState)(!1),[C,_]=(0,r.useState)(null),[g,k]=(0,r.useState)(null),[b,E]=(0,r.useState)({firstName:"",lastName:"",address:"",city:"",state:"",zipCode:"",country:"india",phone:"",email:"",paymentMethod:"cod"}),[w,I]=(0,r.useState)({}),[O,S]=(0,r.useState)(!1),z=t(),P=Math.round(.1*z),F=z+P,M=e=>{let{id:s,value:t}=e.target;E({...b,[s]:t}),w[s]&&I({...w,[s]:""})},B=(e,s)=>{switch(e){case"firstName":case"lastName":case"address":case"city":case"state":case"zipCode":let t=m(s,e);return t?t.message:"";case"email":let a=h(s);return a?a.message:"";default:return""}},D=e=>{let{id:s,value:t}=e.target,a=B(s,t);I({...w,[s]:a})},L=e=>{e.preventDefault();let s={},t=!1;["firstName","lastName","address","city","state","zipCode","email"].forEach(e=>{let a=b[e],r=B(e,a);r&&(s[e]=r,t=!0)}),I(s),S(!0),t||N("payment")},T=e=>{E({...b,paymentMethod:e})},A=async()=>{try{if(!e){_("You must be logged in to complete your order");return}v(!0),_(null);let t={firstName:b.firstName,lastName:b.lastName,address:b.address,city:b.city,state:b.state,zipCode:b.zipCode,country:b.country,phone:b.phone,email:b.email},a=await y(e.id,s.map(e=>({product:e.product,quantity:e.quantity,size:e.size||"One Size"})),t,F);k(a),N("confirmation"),o()}catch(e){console.error("Order processing error:",e),_(e.message||"Failed to process your order. Please try again.")}finally{v(!1)}};return(0,a.jsx)(n.Z,{title:"Checkout",children:(0,a.jsx)("div",{className:"container",children:(0,a.jsxs)("div",{className:d().checkoutContainer,children:[(0,a.jsx)("h1",{children:"Checkout"}),(0,a.jsxs)("div",{className:d().steps,children:[(0,a.jsxs)("div",{className:"".concat(d().step," ").concat("shipping"===x||"payment"===x||"confirmation"===x?d().active:""),children:[(0,a.jsx)("span",{className:d().stepNumber,children:"1"}),(0,a.jsx)("span",{className:d().stepName,children:"Shipping"})]}),(0,a.jsx)("div",{className:d().stepDivider}),(0,a.jsxs)("div",{className:"".concat(d().step," ").concat("payment"===x||"confirmation"===x?d().active:""),children:[(0,a.jsx)("span",{className:d().stepNumber,children:"2"}),(0,a.jsx)("span",{className:d().stepName,children:"Payment"})]}),(0,a.jsx)("div",{className:d().stepDivider}),(0,a.jsxs)("div",{className:"".concat(d().step," ").concat("confirmation"===x?d().active:""),children:[(0,a.jsx)("span",{className:d().stepNumber,children:"3"}),(0,a.jsx)("span",{className:d().stepName,children:"Confirmation"})]})]}),(0,a.jsxs)("div",{className:d().formContainer,children:[(0,a.jsxs)("div",{className:d().formContent,children:["shipping"===x&&(0,a.jsxs)("div",{className:d().shippingForm,children:[(0,a.jsx)("h2",{children:"Shipping Information"}),(0,a.jsxs)("form",{onSubmit:L,noValidate:!0,children:[(0,a.jsxs)("div",{className:d().formRow,children:[(0,a.jsxs)("div",{className:"".concat(d().formGroup," required-field"),children:[(0,a.jsx)("label",{htmlFor:"firstName",children:"First Name"}),(0,a.jsx)("input",{type:"text",id:"firstName",value:b.firstName,onChange:M,onBlur:D,placeholder:"Enter your first name",className:w.firstName?"error-field":""}),w.firstName&&(0,a.jsx)("span",{className:"error-message",children:w.firstName})]}),(0,a.jsxs)("div",{className:"".concat(d().formGroup," required-field"),children:[(0,a.jsx)("label",{htmlFor:"lastName",children:"Last Name"}),(0,a.jsx)("input",{type:"text",id:"lastName",value:b.lastName,onChange:M,onBlur:D,placeholder:"Enter your last name",className:w.lastName?"error-field":""}),w.lastName&&(0,a.jsx)("span",{className:"error-message",children:w.lastName})]})]}),(0,a.jsxs)("div",{className:"".concat(d().formGroup," required-field"),children:[(0,a.jsx)("label",{htmlFor:"address",children:"Street Address"}),(0,a.jsx)("input",{type:"text",id:"address",value:b.address,onChange:M,onBlur:D,placeholder:"Enter your street address",className:w.address?"error-field":""}),w.address&&(0,a.jsx)("span",{className:"error-message",children:w.address})]}),(0,a.jsxs)("div",{className:d().formRow,children:[(0,a.jsxs)("div",{className:"".concat(d().formGroup," required-field"),children:[(0,a.jsx)("label",{htmlFor:"city",children:"City"}),(0,a.jsx)("input",{type:"text",id:"city",value:b.city,onChange:M,onBlur:D,placeholder:"Enter your city",className:w.city?"error-field":""}),w.city&&(0,a.jsx)("span",{className:"error-message",children:w.city})]}),(0,a.jsxs)("div",{className:"".concat(d().formGroup," required-field"),children:[(0,a.jsx)("label",{htmlFor:"state",children:"State"}),(0,a.jsx)("input",{type:"text",id:"state",value:b.state,onChange:M,onBlur:D,placeholder:"Enter your state",className:w.state?"error-field":""}),w.state&&(0,a.jsx)("span",{className:"error-message",children:w.state})]})]}),(0,a.jsxs)("div",{className:d().formRow,children:[(0,a.jsxs)("div",{className:"".concat(d().formGroup," required-field"),children:[(0,a.jsx)("label",{htmlFor:"zipCode",children:"Zip Code"}),(0,a.jsx)("input",{type:"text",id:"zipCode",value:b.zipCode,onChange:M,onBlur:D,placeholder:"Enter your zip code",className:w.zipCode?"error-field":""}),w.zipCode&&(0,a.jsx)("span",{className:"error-message",children:w.zipCode})]}),(0,a.jsxs)("div",{className:d().formGroup,children:[(0,a.jsx)("label",{htmlFor:"country",children:"Country"}),(0,a.jsxs)("select",{id:"country",value:b.country,onChange:M,children:[(0,a.jsx)("option",{value:"india",children:"India"}),(0,a.jsx)("option",{value:"usa",children:"United States"}),(0,a.jsx)("option",{value:"uk",children:"United Kingdom"})]})]})]}),(0,a.jsxs)("div",{className:d().formGroup,children:[(0,a.jsx)("label",{htmlFor:"phone",children:"Phone Number"}),(0,a.jsx)("input",{type:"tel",id:"phone",value:b.phone,onChange:M,placeholder:"Enter your phone number"})]}),(0,a.jsxs)("div",{className:"".concat(d().formGroup," required-field"),children:[(0,a.jsx)("label",{htmlFor:"email",children:"Email"}),(0,a.jsx)("input",{type:"email",id:"email",value:b.email,onChange:M,onBlur:D,placeholder:"Enter your email address",className:w.email?"error-field":""}),w.email&&(0,a.jsx)("span",{className:"error-message",children:w.email})]}),(0,a.jsx)("div",{className:d().formActions,children:(0,a.jsxs)("button",{type:"submit",className:d().submitButton,children:["Continue to Payment ",(0,a.jsx)(i.Z1Y,{})]})})]})]}),"payment"===x&&(0,a.jsxs)("div",{className:d().paymentForm,children:[(0,a.jsx)("h2",{children:"Payment Method"}),(0,a.jsxs)("div",{className:d().paymentOptions,children:[(0,a.jsxs)("div",{className:"".concat(d().paymentOption," ").concat("cod"===b.paymentMethod?d().selected:""),onClick:()=>T("cod"),children:[(0,a.jsx)("div",{className:d().paymentOptionIcon,children:(0,a.jsx)(i.l80,{})}),(0,a.jsxs)("div",{className:d().paymentOptionInfo,children:[(0,a.jsx)("h4",{children:"Cash on Delivery"}),(0,a.jsx)("p",{children:"Pay when you receive your order"})]}),(0,a.jsxs)("div",{className:d().paymentOptionRadio,children:[(0,a.jsx)("input",{type:"radio",name:"paymentMethod",id:"cod",checked:"cod"===b.paymentMethod,onChange:()=>T("cod")}),(0,a.jsx)("span",{className:d().radioCheckmark})]})]}),(0,a.jsxs)("div",{className:"".concat(d().paymentOption," ").concat("card"===b.paymentMethod?d().selected:""),onClick:()=>T("card"),children:[(0,a.jsx)("div",{className:d().paymentOptionIcon,children:(0,a.jsx)(i.ypE,{})}),(0,a.jsxs)("div",{className:d().paymentOptionInfo,children:[(0,a.jsx)("h4",{children:"Credit / Debit Card"}),(0,a.jsx)("p",{children:"Pay securely with your card"}),(0,a.jsxs)("div",{className:d().cardIcons,children:[(0,a.jsx)(i.Z7w,{}),(0,a.jsx)(i.leg,{})]})]}),(0,a.jsxs)("div",{className:d().paymentOptionRadio,children:[(0,a.jsx)("input",{type:"radio",name:"paymentMethod",id:"card",checked:"card"===b.paymentMethod,onChange:()=>T("card")}),(0,a.jsx)("span",{className:d().radioCheckmark})]})]}),(0,a.jsxs)("div",{className:"".concat(d().paymentOption," ").concat("paypal"===b.paymentMethod?d().selected:""),onClick:()=>T("paypal"),children:[(0,a.jsx)("div",{className:d().paymentOptionIcon,children:(0,a.jsx)(i.kD0,{})}),(0,a.jsxs)("div",{className:d().paymentOptionInfo,children:[(0,a.jsx)("h4",{children:"PayPal"}),(0,a.jsx)("p",{children:"Pay using your PayPal account"})]}),(0,a.jsxs)("div",{className:d().paymentOptionRadio,children:[(0,a.jsx)("input",{type:"radio",name:"paymentMethod",id:"paypal",checked:"paypal"===b.paymentMethod,onChange:()=>T("paypal")}),(0,a.jsx)("span",{className:d().radioCheckmark})]})]})]}),(0,a.jsxs)("div",{className:d().formActions,children:[(0,a.jsx)("button",{type:"button",className:d().backButton,onClick:()=>N("shipping"),children:"Back to Shipping"}),(0,a.jsx)("button",{type:"button",className:d().submitButton,onClick:A,disabled:f,children:f?(0,a.jsx)("span",{children:"Processing..."}):(0,a.jsxs)("span",{children:["Place Order ",(0,a.jsx)(i.Z1Y,{})]})})]}),C&&(0,a.jsx)("div",{className:d().orderError,children:C})]}),"confirmation"===x&&(0,a.jsxs)("div",{className:d().confirmation,children:[(0,a.jsx)("div",{className:d().confirmationIcon,children:(0,a.jsxs)("svg",{width:"80",height:"80",viewBox:"0 0 80 80",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("circle",{cx:"40",cy:"40",r:"40",fill:"#4CAF50",fillOpacity:"0.2"}),(0,a.jsx)("path",{d:"M34.5 49.5L24.5 39.5L20.5 43.5L34.5 57.5L60.5 31.5L56.5 27.5L34.5 49.5Z",fill:"#4CAF50"})]})}),(0,a.jsx)("h2",{children:"Order Confirmed!"}),(0,a.jsxs)("p",{className:d().orderID,children:["Order ID: ",g]}),(0,a.jsxs)("p",{className:d().confirmationText,children:["Thank you for your order! We have received your order and will process it as soon as possible.","cod"===b.paymentMethod?" You have chosen Cash on Delivery, so please keep the exact amount ready at the time of delivery.":" Your payment has been successfully processed."]}),(0,a.jsxs)("div",{className:d().formActions,children:[(0,a.jsx)("button",{type:"button",className:d().submitButton,onClick:()=>{window.location.href="/orders"},children:"View My Orders"}),(0,a.jsx)("button",{type:"button",className:d().shopButton,onClick:()=>l.push("/"),children:"Continue Shopping"})]})]})]}),"confirmation"!==x&&(0,a.jsxs)("div",{className:d().orderSummary,children:[(0,a.jsx)("h2",{children:"Order Summary"}),(0,a.jsxs)("div",{className:d().summaryItems,children:[(0,a.jsxs)("div",{className:d().summaryItem,children:[(0,a.jsx)("span",{children:"Subtotal"}),(0,a.jsxs)("span",{children:["₹",z]})]}),(0,a.jsxs)("div",{className:d().summaryItem,children:[(0,a.jsx)("span",{children:"Shipping"}),(0,a.jsx)("span",{children:"Free"})]}),(0,a.jsxs)("div",{className:d().summaryItem,children:[(0,a.jsx)("span",{children:"Tax"}),(0,a.jsxs)("span",{children:["₹",P]})]}),(0,a.jsxs)("div",{className:"".concat(d().summaryItem," ").concat(d().total),children:[(0,a.jsx)("span",{children:"Total"}),(0,a.jsxs)("span",{children:["₹",F]})]})]}),"shipping"===x&&(0,a.jsxs)("button",{className:d().checkoutButton,onClick:L,children:[(0,a.jsx)(i.Z1Y,{})," PROCEED TO PAYMENT"]}),"payment"===x&&(0,a.jsxs)("button",{className:d().checkoutButton,onClick:A,disabled:f,children:["cod"===b.paymentMethod?(0,a.jsx)(i.l80,{}):(0,a.jsx)(i.ypE,{}),f?"PROCESSING...":"COMPLETE ORDER"]}),(0,a.jsx)("div",{className:d().secureInfo,children:(0,a.jsx)("small",{children:"Secure checkout with 128-bit SSL encryption"})}),(0,a.jsx)("div",{className:d().returnLink,children:(0,a.jsx)(c(),{href:"/cart",children:(0,a.jsx)("span",{className:d().returnToCart,children:"Return to cart"})})})]})]})]})})})}},8403:function(e,s,t){"use strict";t.d(s,{TR:function(){return n},Tl:function(){return c},uI:function(){return i},zk:function(){return o}});var a=t(3247),r=t(2531);let n=async e=>{try{if(!r.db)throw Error("Firestore is not initialized");let s=(0,a.hJ)(r.db,"orders"),t=a.EK.now(),n={...e,createdAt:t,updatedAt:t};return(await (0,a.ET)(s,n)).id}catch(e){throw console.error("Error saving order:",e),e}},i=async e=>{try{if(!r.db)throw Error("Firestore is not initialized");let s=(0,a.hJ)(r.db,"orders"),t=(0,a.IO)(s,(0,a.ar)("userId","==",e),(0,a.Xo)("createdAt","desc")),n=await (0,a.PL)(t),i=[];return n.forEach(e=>{let s=e.data();i.push({id:e.id,...s})}),i}catch(e){throw console.error("Error getting user orders:",e),e}},o=async function(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"createdAt",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"desc",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20,o=arguments.length>5?arguments[5]:void 0;try{let c;if(!r.db)throw Error("Firestore is not initialized");let l=(0,a.hJ)(r.db,"orders"),d=(0,a.IO)(l,(0,a.Xo)(t,n));if(e){let s=a.EK.fromDate(e);d=(0,a.IO)(d,(0,a.ar)("createdAt",">=",s))}if(s){let e=a.EK.fromDate(s);d=(0,a.IO)(d,(0,a.ar)("createdAt","<=",e))}d=(0,a.IO)(d,(0,a.b9)(i)),o&&(d=(0,a.IO)(d,(0,a.e0)(o)));let m=await (0,a.PL)(d),h=[];return m.forEach(e=>{let s=e.data();h.push({id:e.id,...s}),c=e}),{orders:h,lastDoc:c}}catch(e){throw console.error("Error getting all orders:",e),e}},c=async()=>{try{if(!r.db)throw Error("Firestore is not initialized");let e=(0,a.hJ)(r.db,"orders"),s=new Date;s.setMonth(s.getMonth()-1);let t=(0,a.IO)(e,(0,a.ar)("createdAt",">=",a.EK.fromDate(s)),(0,a.Xo)("createdAt","desc")),n=await (0,a.PL)(t),i=[];return n.forEach(e=>{let s=e.data();i.push({id:e.id,...s})}),i}catch(e){throw console.error("Error getting last month orders:",e),e}}},7697:function(e){e.exports={checkoutContainer:"Checkout_checkoutContainer__DvWel",steps:"Checkout_steps__Upq8G",step:"Checkout_step__7_Trb",stepNumber:"Checkout_stepNumber__jczJf",active:"Checkout_active__TdJPF",stepName:"Checkout_stepName__9foLN",stepDivider:"Checkout_stepDivider__v5eNu",formContainer:"Checkout_formContainer__V5Mzb",shippingForm:"Checkout_shippingForm__sPwzE",orderSummary:"Checkout_orderSummary__QF6Nn",formGroup:"Checkout_formGroup__aFYzS",formRow:"Checkout_formRow__yNlqf",summaryItems:"Checkout_summaryItems__lbM_u",summaryItem:"Checkout_summaryItem__zIap9",total:"Checkout_total__uMZge",checkoutButton:"Checkout_checkoutButton__z5G_h",secureInfo:"Checkout_secureInfo__xC1KP",returnLink:"Checkout_returnLink__0tSja",returnToCart:"Checkout_returnToCart__Cx6GP",debugSection:"Checkout_debugSection__yQUic",debugList:"Checkout_debugList__00Q3d",formActions:"Checkout_formActions__B3pXk",submitButton:"Checkout_submitButton__El17q"}},9008:function(e,s,t){e.exports=t(6665)}},function(e){e.O(0,[365,913,133,888,774,179],function(){return e(e.s=7250)}),_N_E=e.O()}]);