(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{3236:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return t(2044)}])},2044:function(e,s,t){"use strict";t.r(s);var i=t(5893),o=t(7294),r=t(1163),a=t(1664),n=t.n(a),c=t(2091),u=t(3133),l=t(9368),d=t(8368),h=t(3323),_=t.n(h);s.default=()=>{let[e,s]=(0,o.useState)(""),[t,a]=(0,o.useState)(""),[h,m]=(0,o.useState)(!1),[f,w]=(0,o.useState)(!1),[g,p]=(0,o.useState)(!1),[y,v]=(0,o.useState)({}),x=(0,r.useRouter)(),{login:N}=(0,l.a)(),A=()=>{let s={},i=!0;return e.trim()?/\S+@\S+\.\S+/.test(e)||(s.email="Email is invalid",i=!1):(s.email="Email is required",i=!1),t?t.length<6&&(s.password="Password must be at least 6 characters",i=!1):(s.password="Password is required",i=!1),v(s),i},S=async s=>{if(s.preventDefault(),A()){m(!0),v({}),w(!1);try{let s=await N(e,t);if(s.success){if(!1===s.emailVerified)w(!0),window.showNotification&&window.showNotification("Please verify your email address","warning");else{window.showNotification&&window.showNotification("Login successful. Welcome back!","success");let e=x.query.returnUrl||"/";x.push(e)}}else v({general:s.message})}catch(e){v({general:"An error occurred during login"})}finally{m(!1)}}},j=async()=>{s("demo@example.com"),a("password123"),m(!0),v({});try{let e=await N("demo@example.com","password123");if(e.success){window.showNotification&&window.showNotification("Demo login successful!","success");let e=x.query.returnUrl||"/";x.push(e)}else v({general:e.message})}catch(e){v({general:"An error occurred during login"})}finally{m(!1)}},k=async()=>{m(!0),v({});try{let e=await (0,d.qj)();if(e.success){window.showNotification&&window.showNotification("Login with Google successful!","success");let e=x.query.returnUrl||"/";x.push(e)}else v({general:e.message})}catch(e){v({general:"An error occurred during Google login"})}finally{m(!1)}},b=async()=>{p(!0);try{let e=await (0,d.zk)();e.success?window.showNotification&&window.showNotification("Verification email sent. Please check your inbox.","success"):window.showNotification&&window.showNotification(e.message,"error")}catch(e){window.showNotification&&window.showNotification("An error occurred while sending the verification email","error")}finally{p(!1)}};return(0,i.jsx)(u.Z,{title:"Login - Nikhil's Jeans",children:(0,i.jsx)("div",{className:_().authContainer,children:(0,i.jsxs)("div",{className:_().authBox,children:[(0,i.jsxs)("div",{className:_().authHeader,children:[(0,i.jsx)("h1",{children:"Welcome Back"}),(0,i.jsx)("p",{children:"Sign in to your account to continue"})]}),y.general&&(0,i.jsx)("div",{className:_().errorMessage,children:y.general}),f&&(0,i.jsxs)("div",{className:_().verificationMessage,children:[(0,i.jsx)("p",{children:"Your email address has not been verified. Please check your inbox for the verification email."}),(0,i.jsxs)("p",{children:["Didn't receive the email?"," ",(0,i.jsx)("span",{className:_().resendLink,onClick:b,children:g?"Sending...":"Resend verification email"})]})]}),(0,i.jsxs)("form",{onSubmit:S,className:_().authForm,children:[(0,i.jsxs)("div",{className:_().formGroup,children:[(0,i.jsxs)("div",{className:_().inputWithIcon,children:[(0,i.jsx)(c.SRX,{className:_().inputIcon}),(0,i.jsx)("input",{type:"email",value:e,onChange:e=>s(e.target.value),placeholder:"Email Address",className:y.email?_().inputError:""})]}),y.email&&(0,i.jsx)("div",{className:_().errorText,children:y.email})]}),(0,i.jsxs)("div",{className:_().formGroup,children:[(0,i.jsxs)("div",{className:_().inputWithIcon,children:[(0,i.jsx)(c.kUi,{className:_().inputIcon}),(0,i.jsx)("input",{type:"password",value:t,onChange:e=>a(e.target.value),placeholder:"Password",className:y.password?_().inputError:""})]}),y.password&&(0,i.jsx)("div",{className:_().errorText,children:y.password})]}),(0,i.jsx)("div",{className:_().forgotPassword,children:(0,i.jsx)(n(),{href:"/forgot-password",children:"Forgot Password?"})}),(0,i.jsxs)("button",{type:"submit",className:_().authButton,disabled:h,children:[h?"Signing in...":"Sign In",!h&&(0,i.jsx)(c.Z1Y,{})]})]}),(0,i.jsx)("button",{className:_().demoButton,onClick:j,disabled:h,children:"Use Demo Account"}),(0,i.jsxs)("div",{className:_().socialLogin,children:[(0,i.jsx)("div",{className:_().socialSeparator,children:(0,i.jsx)("span",{children:"or continue with"})}),(0,i.jsx)("div",{className:_().socialButtons,children:(0,i.jsxs)("button",{type:"button",className:"".concat(_().socialButton," ").concat(_().googleButton),onClick:k,disabled:h,children:[(0,i.jsx)(c.ldW,{}),"Google"]})})]}),(0,i.jsx)("div",{className:_().authSwitch,children:(0,i.jsxs)("p",{children:["Don't have an account? ",(0,i.jsx)(n(),{href:"/register",children:"Register"})]})})]})})})}},8368:function(e,s,t){"use strict";t.d(s,{Od:function(){return l},UD:function(){return u},qj:function(){return c},x9:function(){return h},zk:function(){return d}});var i=t(2531),o=t(4350);let r=(0,o.v0)(i.l2),a=new o.hJ,n=e=>{var s;let t=e.user;return{id:t.uid,name:t.displayName||(null===(s=t.email)||void 0===s?void 0:s.split("@")[0])||"User",email:t.email||""}},c=async()=>{try{let e=await (0,o.rh)(r,a),s=n(e);return localStorage.setItem("nikhilsJeansUser",JSON.stringify(s)),{success:!0,message:"Successfully signed in with Google",user:s}}catch(s){console.error("Google sign-in error:",s);let e="Failed to sign in with Google";return"auth/popup-closed-by-user"===s.code?e="Sign-in popup was closed":"auth/cancelled-popup-request"===s.code?e="Multiple popup requests were made":"auth/network-request-failed"===s.code&&(e="Network error. Please check your connection"),{success:!1,message:e}}},u=async e=>{try{let s=(await (0,o.Xb)(r,e,"temp-".concat(Math.random().toString(36).substring(2,10)))).user;return await (0,o.w$)(s),localStorage.setItem("pendingVerificationEmail",e),await (0,o.w7)(r),{success:!0,message:"Verification email sent. Please check your inbox and verify your email before continuing.",verificationSent:!0}}catch(s){console.error("Pre-registration verification error:",s);let e="Failed to send verification email";return"auth/email-already-in-use"===s.code?e="An account with this email already exists":"auth/invalid-email"===s.code?e="Invalid email address":"auth/network-request-failed"===s.code&&(e="Network error. Please check your connection"),{success:!1,message:e}}},l=async e=>{try{return await (0,o.iA)(r,e),{success:!0,message:"Email verified successfully. You can now complete your registration."}}catch(s){console.error("Email verification error:",s);let e="Failed to verify email";return"auth/invalid-action-code"===s.code?e="The verification link is invalid or has expired":"auth/user-not-found"===s.code&&(e="User not found"),{success:!1,message:e}}},d=async()=>{try{let e=r.currentUser;if(!e)return{success:!1,message:"No user is currently signed in"};return await (0,o.w$)(e),{success:!0,message:"Verification email sent. Please check your inbox."}}catch(s){console.error("Error sending verification email:",s);let e="Failed to send verification email";return"auth/too-many-requests"===s.code&&(e="Too many requests. Please try again later."),{success:!1,message:e}}},h=async e=>{try{return await (0,o.LS)(r,e),{success:!0,message:"Password reset email sent. Please check your inbox."}}catch(s){console.error("Error sending password reset email:",s);let e="Failed to send password reset email";return"auth/user-not-found"===s.code?e="No user found with this email address":"auth/invalid-email"===s.code?e="Invalid email address":"auth/too-many-requests"===s.code&&(e="Too many requests. Please try again later."),{success:!1,message:e}}}},3323:function(e){e.exports={authContainer:"Auth_authContainer__krRUD",authBox:"Auth_authBox__5RrEW",authHeader:"Auth_authHeader__tImyy",authForm:"Auth_authForm__Q3DLf",formGroup:"Auth_formGroup__9PGF_",inputWithIcon:"Auth_inputWithIcon__E30Qx",inputIcon:"Auth_inputIcon__CfFFk",inputError:"Auth_inputError__8efgK",errorText:"Auth_errorText__FtdKD",errorMessage:"Auth_errorMessage__BAq2s",forgotPassword:"Auth_forgotPassword__bH__X",authButton:"Auth_authButton__FY9nb",demoButton:"Auth_demoButton__SS_bt",socialLogin:"Auth_socialLogin__0SQrX",socialSeparator:"Auth_socialSeparator__wNJSs",socialButtons:"Auth_socialButtons___sfR3",socialButton:"Auth_socialButton__9eCca",googleButton:"Auth_googleButton__4C_0m",facebookButton:"Auth_facebookButton__1Jlfx",authSwitch:"Auth_authSwitch__QU422",termsCheck:"Auth_termsCheck__1soSS",successMessage:"Auth_successMessage__Nbmdt",smallText:"Auth_smallText___Fn1p",backToLogin:"Auth_backToLogin__WXUBT",verificationMessage:"Auth_verificationMessage__JQCur",resendLink:"Auth_resendLink__xJDw8",verificationContainer:"Auth_verificationContainer__f38PA",verifyingState:"Auth_verifyingState__ZomE7",successState:"Auth_successState__sP4R_",errorState:"Auth_errorState__uunBv",spinner:"Auth_spinner__fRASl",spin:"Auth_spin__3Kb1j",successIcon:"Auth_successIcon__h5Mnu",errorIcon:"Auth_errorIcon__7sb9Y",actionButtons:"Auth_actionButtons__UI8ZV",primaryButton:"Auth_primaryButton__MCkc9",secondaryButton:"Auth_secondaryButton__o9IMv",inputWithoutIcon:"Auth_inputWithoutIcon__BDMof",disabledInput:"Auth_disabledInput__xcpEZ",verificationNote:"Auth_verificationNote__1AuDi"}},9008:function(e,s,t){e.exports=t(6665)}},function(e){e.O(0,[365,913,133,888,774,179],function(){return e(e.s=3236)}),_N_E=e.O()}]);