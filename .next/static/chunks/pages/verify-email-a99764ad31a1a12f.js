(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[70],{3541:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/verify-email",function(){return s(3740)}])},3740:function(e,t,s){"use strict";s.r(t);var r=s(5893),i=s(7294),n=s(1163),a=s(1664),o=s.n(a),c=s(2091),u=s(3133),l=s(8368),_=s(3323),h=s.n(_);t.default=()=>{let[e,t]=(0,i.useState)(!0),[s,a]=(0,i.useState)(null),{oobCode:_}=(0,n.useRouter)().query;return(0,i.useEffect)(()=>{async function e(){if(!_||"string"!=typeof _){a({success:!1,message:"Invalid verification link"}),t(!1);return}try{let e=await (0,l.Od)(_);a(e)}catch(e){a({success:!1,message:"Error verifying email. Please try again."})}finally{t(!1)}}_&&e()},[_]),(0,r.jsx)(u.Z,{title:"Verify Email - Nikhil's Jeans",children:(0,r.jsx)("div",{className:h().authContainer,children:(0,r.jsxs)("div",{className:h().authBox,children:[(0,r.jsx)("div",{className:h().authHeader,children:(0,r.jsx)("h1",{children:"Email Verification"})}),(0,r.jsx)("div",{className:h().verificationContainer,children:e?(0,r.jsxs)("div",{className:h().verifyingState,children:[(0,r.jsx)(c.fCD,{className:h().spinner}),(0,r.jsx)("p",{children:"Verifying your email..."})]}):(null==s?void 0:s.success)?(0,r.jsxs)("div",{className:h().successState,children:[(0,r.jsx)(c.FJM,{className:h().successIcon}),(0,r.jsx)("h2",{children:"Email Verified Successfully!"}),(0,r.jsx)("p",{children:s.message}),(0,r.jsxs)("div",{className:h().actionButtons,children:[(0,r.jsx)(o(),{href:"/register/complete",className:h().primaryButton,children:"Complete Registration"}),(0,r.jsx)(o(),{href:"/login",className:h().secondaryButton,children:"Go to Login"})]})]}):(0,r.jsxs)("div",{className:h().errorState,children:[(0,r.jsx)(c.G5m,{className:h().errorIcon}),(0,r.jsx)("h2",{children:"Verification Failed"}),(0,r.jsx)("p",{children:(null==s?void 0:s.message)||"An error occurred during email verification"}),(0,r.jsxs)("div",{className:h().actionButtons,children:[(0,r.jsx)(o(),{href:"/register",className:h().primaryButton,children:"Try Again"}),(0,r.jsx)(o(),{href:"/",className:h().secondaryButton,children:"Go to Homepage"})]})]})})]})})})}},8368:function(e,t,s){"use strict";s.d(t,{Od:function(){return l},UD:function(){return u},qj:function(){return c},x9:function(){return h},zk:function(){return _}});var r=s(2531),i=s(4350);let n=(0,i.v0)(r.l2),a=new i.hJ,o=e=>{var t;let s=e.user;return{id:s.uid,name:s.displayName||(null===(t=s.email)||void 0===t?void 0:t.split("@")[0])||"User",email:s.email||""}},c=async()=>{try{let e=await (0,i.rh)(n,a),t=o(e);return localStorage.setItem("nikhilsJeansUser",JSON.stringify(t)),{success:!0,message:"Successfully signed in with Google",user:t}}catch(t){console.error("Google sign-in error:",t);let e="Failed to sign in with Google";return"auth/popup-closed-by-user"===t.code?e="Sign-in popup was closed":"auth/cancelled-popup-request"===t.code?e="Multiple popup requests were made":"auth/network-request-failed"===t.code&&(e="Network error. Please check your connection"),{success:!1,message:e}}},u=async e=>{try{let t=(await (0,i.Xb)(n,e,"temp-".concat(Math.random().toString(36).substring(2,10)))).user;return await (0,i.w$)(t),localStorage.setItem("pendingVerificationEmail",e),await (0,i.w7)(n),{success:!0,message:"Verification email sent. Please check your inbox and verify your email before continuing.",verificationSent:!0}}catch(t){console.error("Pre-registration verification error:",t);let e="Failed to send verification email";return"auth/email-already-in-use"===t.code?e="An account with this email already exists":"auth/invalid-email"===t.code?e="Invalid email address":"auth/network-request-failed"===t.code&&(e="Network error. Please check your connection"),{success:!1,message:e}}},l=async e=>{try{return await (0,i.iA)(n,e),{success:!0,message:"Email verified successfully. You can now complete your registration."}}catch(t){console.error("Email verification error:",t);let e="Failed to verify email";return"auth/invalid-action-code"===t.code?e="The verification link is invalid or has expired":"auth/user-not-found"===t.code&&(e="User not found"),{success:!1,message:e}}},_=async()=>{try{let e=n.currentUser;if(!e)return{success:!1,message:"No user is currently signed in"};return await (0,i.w$)(e),{success:!0,message:"Verification email sent. Please check your inbox."}}catch(t){console.error("Error sending verification email:",t);let e="Failed to send verification email";return"auth/too-many-requests"===t.code&&(e="Too many requests. Please try again later."),{success:!1,message:e}}},h=async e=>{try{return await (0,i.LS)(n,e),{success:!0,message:"Password reset email sent. Please check your inbox."}}catch(t){console.error("Error sending password reset email:",t);let e="Failed to send password reset email";return"auth/user-not-found"===t.code?e="No user found with this email address":"auth/invalid-email"===t.code?e="Invalid email address":"auth/too-many-requests"===t.code&&(e="Too many requests. Please try again later."),{success:!1,message:e}}}},3323:function(e){e.exports={authContainer:"Auth_authContainer__krRUD",authBox:"Auth_authBox__5RrEW",authHeader:"Auth_authHeader__tImyy",authForm:"Auth_authForm__Q3DLf",formGroup:"Auth_formGroup__9PGF_",inputWithIcon:"Auth_inputWithIcon__E30Qx",inputIcon:"Auth_inputIcon__CfFFk",inputError:"Auth_inputError__8efgK",errorText:"Auth_errorText__FtdKD",errorMessage:"Auth_errorMessage__BAq2s",forgotPassword:"Auth_forgotPassword__bH__X",authButton:"Auth_authButton__FY9nb",demoButton:"Auth_demoButton__SS_bt",socialLogin:"Auth_socialLogin__0SQrX",socialSeparator:"Auth_socialSeparator__wNJSs",socialButtons:"Auth_socialButtons___sfR3",socialButton:"Auth_socialButton__9eCca",googleButton:"Auth_googleButton__4C_0m",facebookButton:"Auth_facebookButton__1Jlfx",authSwitch:"Auth_authSwitch__QU422",termsCheck:"Auth_termsCheck__1soSS",successMessage:"Auth_successMessage__Nbmdt",smallText:"Auth_smallText___Fn1p",backToLogin:"Auth_backToLogin__WXUBT",verificationMessage:"Auth_verificationMessage__JQCur",resendLink:"Auth_resendLink__xJDw8",verificationContainer:"Auth_verificationContainer__f38PA",verifyingState:"Auth_verifyingState__ZomE7",successState:"Auth_successState__sP4R_",errorState:"Auth_errorState__uunBv",spinner:"Auth_spinner__fRASl",spin:"Auth_spin__3Kb1j",successIcon:"Auth_successIcon__h5Mnu",errorIcon:"Auth_errorIcon__7sb9Y",actionButtons:"Auth_actionButtons__UI8ZV",primaryButton:"Auth_primaryButton__MCkc9",secondaryButton:"Auth_secondaryButton__o9IMv",inputWithoutIcon:"Auth_inputWithoutIcon__BDMof",disabledInput:"Auth_disabledInput__xcpEZ",verificationNote:"Auth_verificationNote__1AuDi"}},9008:function(e,t,s){e.exports=s(6665)}},function(e){e.O(0,[365,913,133,888,774,179],function(){return e(e.s=3541)}),_N_E=e.O()}]);