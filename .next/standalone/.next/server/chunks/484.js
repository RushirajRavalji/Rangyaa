exports.id=484,exports.ids=[484],exports.modules={6279:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{H:()=>g,a:()=>u});var o=r(997),s=r(6689),i=r(5211),c=r(401),n=r(66),l=e([i,c,n]);[i,c,n]=l.then?(await l)():l;let d=(0,s.createContext)(void 0),u=()=>{let e=(0,s.useContext)(d);if(!e)throw Error("useAuth must be used within an AuthProvider");return e},g=({children:e})=>{let[t,r]=(0,s.useState)(null),[a,l]=(0,s.useState)(!0),u=(0,c.getAuth)(n.l2);(0,s.useEffect)(()=>{let e=(0,i.ts)();r(e);let t=(0,c.onAuthStateChanged)(u,e=>{if(l(!0),e){let e=(0,i.ts)();r(e)}else r(null);l(!1)});return l(!1),()=>t()},[u]);let g=async(e,t)=>{l(!0);try{let a=await (0,i.x4)(e,t);return a.success&&a.user&&r(a.user),l(!1),{success:a.success,message:a.message,emailVerified:a.emailVerified}}catch(e){return l(!1),{success:!1,message:"An error occurred during login"}}},y=async(e,t,a)=>{l(!0);try{let o=await (0,i.z2)(e,t,a);return o.success&&o.user&&r(o.user),l(!1),{success:o.success,message:o.message,emailVerificationSent:o.emailVerificationSent}}catch(e){return l(!1),{success:!1,message:"An error occurred during registration"}}};return o.jsx(d.Provider,{value:{user:t,isLoading:a,isAuthenticated:!!t,login:g,register:y,logout:()=>{(0,i.kS)(),r(null)}},children:e})};a()}catch(e){a(e)}})},7024:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{R:()=>n,U:()=>d});var o=r(997),s=r(6689),i=r(5790),c=e([i]);i=(c.then?(await c)():c)[0];let l=(0,s.createContext)(void 0);function n({children:e}){let[t,r]=(0,s.useState)([]),[a,c]=(0,s.useState)(!0),[n,d]=(0,s.useState)(null),[u,g]=(0,s.useState)(Date.now()),y=(0,s.useCallback)(async()=>{try{c(!0);let e=await (0,i.Ej)();r(e),d(null),g(Date.now())}catch(e){d(e.message||"Failed to load banners"),console.error("Error loading banners:",e)}finally{c(!1)}},[]);(0,s.useEffect)(()=>{},[y]);let m=(0,s.useMemo)(()=>{let e={};return t.forEach(t=>{e[t.page]||(e[t.page]=[]),e[t.page].push(t)}),Object.keys(e).forEach(t=>{e[t].sort((e,t)=>e.order-t.order)}),e},[t,u]),h=(0,s.useCallback)(async e=>{if(m[e])return m[e];try{return await (0,i.rP)(e)}catch(t){return console.error(`Error getting banners for page ${e}:`,t),[]}},[m]),p=(0,s.useCallback)(async e=>{try{let t=await (0,i.ON)(e);return await y(),t}catch(e){throw d(e.message||"Failed to add banner"),e}},[y]),f=(0,s.useCallback)(async(e,t)=>{try{await (0,i.Bt)(e,t),await y()}catch(e){throw d(e.message||"Failed to update banner"),e}},[y]),w=(0,s.useCallback)(async e=>{try{await (0,i.H_)(e),await y()}catch(e){throw d(e.message||"Failed to delete banner"),e}},[y]),b=(0,s.useCallback)(async()=>{await y()},[y]),v=(0,s.useMemo)(()=>({banners:t,loading:a,error:n,getBannersForPage:h,addNewBanner:p,updateExistingBanner:f,removeBanner:w,refreshBanners:b}),[t,a,n,h,p,f,w,b]);return o.jsx(l.Provider,{value:v,children:e})}let d=()=>{let e=(0,s.useContext)(l);if(void 0===e)throw Error("useBanners must be used within a BannerProvider");return e};a()}catch(e){a(e)}})},4796:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c,j:()=>i});var a=r(997),o=r(6689);let s=(0,o.createContext)(void 0),i=()=>{let e=(0,o.useContext)(s);if(!e)throw Error("useCart must be used within a CartProvider");return e},c=({children:e})=>{let[t,r]=(0,o.useState)([]),[i,c]=(0,o.useState)([]),[n,l]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{},[]),(0,o.useEffect)(()=>{},[t,i,n]),a.jsx(s.Provider,{value:{cart:t,wishlist:i,addToCart:(e,t=1,a,o)=>{let s=a??(e.sizes&&e.sizes.length>0?e.sizes[0]:""),i=o||(e.colors?e.colors[0]:void 0);r(r=>{let a=r.findIndex(t=>t.product.id===e.id&&t.size===s&&(!t.color&&!i||t.color?.code===i?.code));if(!(a>=0))return[...r,{product:e,quantity:t,size:s,color:i}];{let e=[...r];return e[a].quantity+=t,e}})},removeFromCart:e=>{r(t=>t.filter(t=>t.product.id!==e))},updateCartItemQuantity:(e,t)=>{r(r=>r.map(r=>r.product.id===e?{...r,quantity:Math.max(1,t)}:r))},clearCart:()=>{r([])},getCartTotal:()=>t.reduce((e,t)=>e+t.product.price*t.quantity,0),getCartCount:()=>t.reduce((e,t)=>e+t.quantity,0),toggleWishlist:e=>{c(t=>t.some(t=>t.id===e.id)?t.filter(t=>t.id!==e.id):[...t,e])},isInWishlist:e=>i.some(t=>t.id===e)},children:e})}},1784:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{G:()=>d,r:()=>l});var o=r(997),s=r(6689),i=r(5200),c=e([i]);i=(c.then?(await c)():c)[0];let n=(0,s.createContext)(void 0),l=()=>{let e=(0,s.useContext)(n);if(!e)throw Error("useProducts must be used within a ProductProvider");return e},d=({children:e})=>{let[t,r]=(0,s.useState)([]),[a,c]=(0,s.useState)([]),[l,d]=(0,s.useState)({}),[u,g]=(0,s.useState)(!0),[y,m]=(0,s.useState)(null),h=(0,s.useCallback)(e=>{let t={};e.forEach(e=>{e.category&&(t[e.category]||(t[e.category]=[]),t[e.category].push(e))}),d(t)},[]),p=(0,s.useCallback)(async()=>{try{g(!0),m(null);let e=await i.Dg();r(e),h(e)}catch(e){console.error("Error fetching products:",e),m(e.message||"Failed to load products. Please try again later.")}finally{g(!1)}},[h]);(0,s.useEffect)(()=>{p()},[p]);let f=(0,s.useCallback)(e=>l[e]||[],[l]),w=async e=>{try{if(m(null),!e.category)throw Error("Product category is required");let t=await i.gK(e);return r(e=>[...e,t]),d(r=>{let a={...r},o=e.category;return a[o]||(a[o]=[]),a[o]=[...a[o],t],a}),t}catch(e){throw console.error("Error adding product:",e),m(e.message||"Failed to add product"),e}},b=async(e,a)=>{try{m(null);let o=t.find(t=>t.id===e);if(!o)throw Error("Product not found");await i.nM(e,a);let s={...o,...a};r(t=>t.map(t=>t.id===e?s:t)),a.category&&o.category!==a.category?await p():d(t=>{let r=o.category;return r&&t[r]?{...t,[r]:t[r].map(t=>t.id===e?s:t)}:t})}catch(e){throw console.error("Error updating product:",e),m(e.message||"Failed to update product"),e}},v=async e=>{try{m(null);let a=t.find(t=>t.id===e);if(!a)throw Error("Product not found");await i.Ir(e),r(t=>t.filter(t=>t.id!==e)),a.category&&d(t=>{let r={...t};return r[a.category]&&(r[a.category]=r[a.category].filter(t=>t.id!==e),0===r[a.category].length&&delete r[a.category]),r})}catch(e){throw console.error("Error removing product:",e),m(e.message||"Failed to delete product"),e}},E=async e=>{try{return m(null),await i.jx(e)}catch(e){throw console.error("Error uploading image:",e),m(e.message||"Failed to upload image"),e}},C=async()=>{await p()};return o.jsx(n.Provider,{value:{products:t,categories:a,productsByCategory:l,loading:u,error:y,addNewProduct:w,updateExistingProduct:b,removeProduct:v,uploadImage:E,refreshProducts:C,getProductsInCategory:f},children:e})};a()}catch(e){a(e)}})},1484:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{default:()=>y});var o=r(997);r(6764),r(2675),r(9187);var s=r(6689),i=r(1163),c=r(6279),n=r(1784),l=r(4796),d=r(7024),u=r(2079),g=e([c,n,d]);[c,n,d]=g.then?(await g)():g;let y=function({Component:e,pageProps:t}){let[r,a]=(0,s.useState)(!1),g=(0,i.useRouter)();return(0,s.useEffect)(()=>{a(!0);let e=(0,u.ju)(),t=()=>{setTimeout(()=>{(0,u.wL)()},100)};return g.events.on("routeChangeComplete",t),()=>{e&&e.disconnect(),g.events.off("routeChangeComplete",t)}},[g.events]),o.jsx("div",{suppressHydrationWarning:!0,className:"page-transition",children:o.jsx(c.H,{children:o.jsx(n.G,{children:o.jsx(l.Z,{children:o.jsx(d.R,{children:o.jsx(e,{...t})})})})})})};a()}catch(e){a(e)}})},2079:(e,t,r)=>{"use strict";r.d(t,{ju:()=>a,wL:()=>o});let a=()=>null,o=()=>{}},5211:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{kS:()=>g,ts:()=>l,x4:()=>d,z2:()=>u});var o=r(66),s=r(401),i=e([o,s]);[o,s]=i.then?(await i)():i;let c=(0,s.getAuth)(o.l2),n="nikhilsJeansAuthToken",l=()=>null,d=async(e,t)=>{try{let r=(await (0,s.signInWithEmailAndPassword)(c,e,t)).user,a=await r.getIdToken();if(localStorage.setItem(n,a),!r.emailVerified){let t={id:r.uid,name:r.displayName||e.split("@")[0],email:r.email||e,emailVerified:!1};return{success:!0,message:"Login successful, but please verify your email",user:t,emailVerified:!1}}let o={id:r.uid,name:r.displayName||e.split("@")[0],email:r.email||e,emailVerified:!0};return{success:!0,message:"Login successful",user:o,emailVerified:!0}}catch(t){console.error("Login error:",t);let e="An error occurred during login";return"auth/user-not-found"===t.code?e="No user found with this email":"auth/wrong-password"===t.code?e="Invalid password":"auth/invalid-email"===t.code?e="Invalid email address":"auth/user-disabled"===t.code?e="This account has been disabled":"auth/network-request-failed"===t.code&&(e="Network error. Please check your connection."),{success:!1,message:e}}},u=async(e,t,r)=>{try{let a=(await (0,s.createUserWithEmailAndPassword)(c,t,r)).user;await (0,s.sendEmailVerification)(a);let o=await a.getIdToken();localStorage.setItem(n,o);let i={id:a.uid,name:e||t.split("@")[0],email:a.email||t,emailVerified:!1};return{success:!0,message:"Registration successful. Please check your email to verify your account.",user:i,emailVerificationSent:!0}}catch(t){console.error("Registration error:",t);let e="An error occurred during registration";return"auth/email-already-in-use"===t.code?e="User with this email already exists":"auth/invalid-email"===t.code?e="Invalid email address":"auth/weak-password"===t.code?e="Password is too weak":"auth/network-request-failed"===t.code&&(e="Network error. Please check your connection."),{success:!1,message:e}}},g=async()=>{try{return await (0,s.signOut)(c),localStorage.removeItem(n),{success:!0,message:"Logout successful"}}catch(e){return console.error("Logout error:",e),{success:!1,message:"An error occurred during logout"}}};a()}catch(e){a(e)}})},66:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{db:()=>d,l2:()=>l,tO:()=>u});var o=r(3745),s=r(9500),i=r(1492),c=r(3392),n=e([o,s,i,c]);[o,s,i,c]=n.then?(await n)():n;let l=(0,o.getApps)().length?(0,o.getApp)():(0,o.initializeApp)({apiKey:"AIzaSyD_spb43jww6Pl9OFpIOMzg2LFrH-VbasQ",authDomain:"nikhils-jeans-website.firebaseapp.com",projectId:"nikhils-jeans-website",storageBucket:"nikhils-jeans-website.appspot.com",messagingSenderId:"89588207516",appId:"1:89588207516:web:0cfbe407bb6d7cc8764259",measurementId:"G-ZHMF1GS857"}),d=null,u=null;a()}catch(e){a(e)}})},5790:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Bt:()=>y,Ej:()=>d,H_:()=>m,ON:()=>g,rP:()=>u});var o=r(66),s=r(1492),i=r(7025),c=e([o,s,i]);[o,s,i]=c.then?(await c)():c;let n=()=>o.db?o.db:(0,s.getFirestore)(o.l2),l=()=>(0,s.collection)(n(),"banners"),d=async()=>{try{let e=l();return(await (0,s.getDocs)(e)).docs.map(e=>({id:e.id,...e.data()}))}catch(e){throw console.error("Error getting banners from Firestore:",e),Error("Failed to fetch banners")}},u=async e=>{try{let t=l(),r=(0,s.query)(t,(0,s.where)("page","==",e));return(await (0,s.getDocs)(r)).docs.map(e=>({id:e.id,...e.data()}))}catch(t){throw console.error(`Error getting ${e} banners:`,t),Error(`Failed to fetch ${e} banners`)}},g=async e=>{try{let t=await u(e.page);if(t.length>0){let e=t[0];await m(e.id)}let r={...e,createdAt:(0,s.serverTimestamp)(),updatedAt:(0,s.serverTimestamp)()},a=l();return{id:(await (0,s.addDoc)(a,r)).id,...r}}catch(e){throw console.error("Error adding banner to Firestore:",e),e}},y=async(e,t)=>{try{let r=(0,s.doc)(n(),"banners",e),a=await (0,s.getDoc)(r);if(!a.exists())throw Error("Banner not found");let o={...t,updatedAt:(0,s.serverTimestamp)()};if(t.imageUrl){let e=a.data();if(e.imageUrl&&e.imageUrl!==t.imageUrl)try{await (0,i.K)(e.imageUrl)}catch(e){console.error("Error deleting old banner image:",e)}}await (0,s.updateDoc)(r,o)}catch(e){throw console.error("Error updating banner in Firestore:",e),e}},m=async e=>{try{let t=(0,s.doc)(n(),"banners",e),r=await (0,s.getDoc)(t);if(!r.exists())throw Error("Banner not found");let a=r.data();if(await (0,s.deleteDoc)(t),a.imageUrl)try{await (0,i.K)(a.imageUrl)}catch(e){console.error("Error deleting banner image:",e)}}catch(e){throw console.error("Error deleting banner from Firestore:",e),e}};a()}catch(e){a(e)}})},7025:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{K:()=>l,x:()=>n});var o=r(66),s=r(3392),i=e([o,s]);[o,s]=i.then?(await i)():i;let c=()=>null===o.tO?(0,s.getStorage)(o.l2):o.tO,n=async e=>{try{let t=c(),r=new Date().getTime(),a=`banner_${r}_${e.name.replace(/[^a-zA-Z0-9.]/g,"_")}`,o=(0,s.ref)(t,`banner_images/${a}`);return await (0,s.uploadBytes)(o,e),await (0,s.getDownloadURL)(o)}catch(e){throw console.error("Error uploading banner image:",e),Error("Failed to upload banner image")}},l=async e=>{try{let t=c(),r=decodeURIComponent(e),a=r.indexOf("banner_images");if(-1===a){console.warn("Not a Firebase Storage URL or not in banner_images folder:",e);return}let o=r.indexOf("?",a),i=-1!==o?r.substring(a,o):r.substring(a),n=(0,s.ref)(t,i);await (0,s.deleteObject)(n),console.log("Banner image deleted successfully:",i)}catch(e){throw console.error("Error deleting banner image:",e),Error("Failed to delete banner image")}};a()}catch(e){a(e)}})},5200:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Dg:()=>h,Ir:()=>A,Kz:()=>E,gK:()=>x,jx:()=>b,nM:()=>F});var o=r(66),s=r(1492),i=r(3392),c=e([o,s,i]);[o,s,i]=c.then?(await c)():c;let n=(0,s.getFirestore)(o.l2);(0,i.getStorage)(o.l2);let l=(0,s.collection)(n,"products"),d=(0,s.collection)(n,"categories"),u={all:null,byId:{},byCategory:{},lastFetched:0},g=e=>e.name&&"string"==typeof e.name?!e.price||isNaN(Number(e.price))?"Valid product price is required":e.category&&"string"==typeof e.category?e.image&&"string"==typeof e.image?null:"Product image is required":"Product category is required":"Product name is required",y=e=>{let t={};return Object.entries(e).forEach(([e,r])=>{null!=r&&("price"===e||"originalPrice"===e||"stock"===e?t[e]=Number(r):"sizes"===e&&"string"==typeof r?t[e]=r.split(",").map(e=>e.trim()).filter(Boolean):"featured"===e&&"string"==typeof r?t[e]="true"===r:t[e]=r)}),t.createdAt||(t.createdAt=(0,s.serverTimestamp)()),t.updatedAt=(0,s.serverTimestamp)(),t},m=()=>null!==u.all&&Date.now()-u.lastFetched<3e5,h=async(e=0)=>{try{if(m()&&0===e&&u.all)return console.log("Returning products from cache"),u.all;console.log("Fetching products from Firestore");let t=(0,s.query)(l,(0,s.orderBy)("createdAt","desc"));e>0&&(t=(0,s.query)(t,(0,s.limit)(e)));let r=(await (0,s.getDocs)(t)).docs.map(e=>({id:e.id,...e.data()}));return 0===e&&(u.all=r,r.forEach(e=>{u.byId[e.id]=e,e.category&&(u.byCategory[e.category]||(u.byCategory[e.category]=[]),u.byCategory[e.category].push(e))}),u.lastFetched=Date.now()),console.log(`Retrieved ${r.length} products from Firestore`),r}catch(e){throw console.error("Error getting products from Firestore:",e),Error("Failed to fetch products")}},p=(e,t)=>{u.byId[e]&&delete u.byId[e],t&&u.byCategory[t]&&(u.byCategory[t]=u.byCategory[t].filter(t=>t.id!==e)),u.all=null},f=()=>{u.all=null,u.byId={},u.byCategory={},u.lastFetched=0},w=()=>(0,i.getStorage)(o.l2),b=async e=>{try{let t=await v(e),r=new Date().getTime(),a=`product_${r}_${e.name.replace(/[^a-zA-Z0-9.]/g,"_")}`,o=(0,s.collection)(n,"images"),i=await (0,s.addDoc)(o,{name:a,type:e.type,base64:t,createdAt:(0,s.serverTimestamp)()});return`base64://${i.id}`}catch(e){throw console.error("Error uploading image:",e),Error("Failed to upload product image")}},v=e=>new Promise((t,r)=>{let a=new FileReader;a.readAsDataURL(e),a.onload=()=>t(a.result),a.onerror=e=>r(e)}),E=async e=>{try{console.log(`Fetching image with ID: ${e}`);let t=(0,s.doc)(n,"images",e),r=await (0,s.getDoc)(t);if(r.exists()){let t=r.data();if(!t||!t.base64)return console.error(`Image exists but has no base64 data. ID: ${e}`),"/images/placeholder.jpg";return console.log(`Successfully retrieved base64 image. ID: ${e}`),t.base64}return console.error(`Image not found with ID: ${e}`),"/images/placeholder.jpg"}catch(e){return console.error("Error getting image:",e),"/images/placeholder.jpg"}},C=async e=>{try{if(e.startsWith("base64://")){let t=e.replace("base64://",""),r=(0,s.doc)(n,"images",t);await (0,s.deleteDoc)(r),console.log("Product image deleted successfully from Firestore:",t);return}let t=w(),r=decodeURIComponent(e),a=r.indexOf("product_images");if(-1===a){console.warn("Not a Firebase Storage URL or not in product_images folder:",e);return}let o=r.indexOf("?",a),c=-1!==o?r.substring(a,o):r.substring(a),l=(0,i.ref)(t,c);await (0,i.deleteObject)(l),console.log("Product image deleted successfully from Storage:",c)}catch(e){console.error("Error deleting product image:",e)}},x=async e=>{try{console.log("Adding product to Firestore:",e);let t=g(e);if(t)throw Error(t);let r=y(e);console.log("Cleaned product data for Firestore:",r);let a=await (0,s.runTransaction)(n,async e=>{let t={id:(await (0,s.addDoc)(l,r)).id,...r},a=(0,s.doc)(d,r.category),o=await e.get(a);return o.exists()?e.update(a,{count:(o.data().count||0)+1,updatedAt:(0,s.serverTimestamp)()}):e.set(a,{id:r.category,name:r.category.charAt(0).toUpperCase()+r.category.slice(1),count:1,createdAt:(0,s.serverTimestamp)(),updatedAt:(0,s.serverTimestamp)()}),t});return u.all&&u.all.unshift(a),u.byId[a.id]=a,a.category&&(u.byCategory[a.category]||(u.byCategory[a.category]=[]),u.byCategory[a.category].unshift(a)),console.log("Product added successfully with ID:",a.id),a}catch(e){throw console.error("Error adding product to Firestore:",e),e}},F=async(e,t)=>{try{let r=(0,s.doc)(n,"products",e),a=await (0,s.getDoc)(r);if(!a.exists())throw Error("Product not found");let o=a.data(),i=y(t);if(i.updatedAt=(0,s.serverTimestamp)(),await (0,s.runTransaction)(n,async e=>{if(e.update(r,i),t.category&&o.category!==t.category){let r=(0,s.doc)(d,o.category),a=await e.get(r);if(a.exists()){let t=a.data().count||0;t>1?e.update(r,{count:t-1,updatedAt:(0,s.serverTimestamp)()}):e.delete(r)}let i=(0,s.doc)(d,t.category),c=await e.get(i);c.exists()?e.update(i,{count:(c.data().count||0)+1,updatedAt:(0,s.serverTimestamp)()}):e.set(i,{id:t.category,name:t.category.charAt(0).toUpperCase()+t.category.slice(1),count:1,createdAt:(0,s.serverTimestamp)(),updatedAt:(0,s.serverTimestamp)()})}}),u.byId[e]){let r={...u.byId[e],...t};if(u.byId[e]=r,u.all){let t=u.all.findIndex(t=>t.id===e);t>=0&&(u.all[t]=r)}if(t.category&&o.category!==t.category)u.byCategory[o.category]&&(u.byCategory[o.category]=u.byCategory[o.category].filter(t=>t.id!==e)),u.byCategory[t.category]||(u.byCategory[t.category]=[]),u.byCategory[t.category].push(r);else if(t.category&&u.byCategory[t.category]){let a=u.byCategory[t.category].findIndex(t=>t.id===e);a>=0&&(u.byCategory[t.category][a]=r)}}else f()}catch(e){throw console.error("Error updating product:",e),Error("Failed to update product")}},A=async e=>{try{let t=(0,s.doc)(n,"products",e),r=await (0,s.getDoc)(t);if(!r.exists())throw Error("Product not found");let a=r.data();if(a.image)try{await C(a.image)}catch(e){console.error("Error deleting product image:",e)}await (0,s.runTransaction)(n,async e=>{if(e.delete(t),a.category){let t=(0,s.doc)(d,a.category),r=await e.get(t);if(r.exists()){let a=r.data().count||0;a>1?e.update(t,{count:a-1,updatedAt:(0,s.serverTimestamp)()}):e.delete(t)}}}),p(e,a.category)}catch(e){throw console.error("Error deleting product:",e),Error("Failed to delete product")}};a()}catch(e){a(e)}})},9187:()=>{},2675:()=>{},6764:()=>{}};